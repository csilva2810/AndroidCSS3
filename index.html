<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Android Search</title>

    <link rel="stylesheet" href="style.css">
    <link href="android.ico" rel="shortcut icon">
    <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:100' rel='stylesheet' type='text/css'>
  </head>
  <body>
  
    <div class="search-container">
      <form action="" name="search" method="GET">
        <input type="search" class="search" name="q" id="q" placeholder="Buscar no Google..." tabindex="1">  
      </form>
    </div>

    <div class="paint-container">

      <div class="sol"></div>
      <div class="lua"></div>
      <div class="nuvem"></div>
      <div class="nuvem nuvem2"></div>
      <div class="nuvem nuvem3"></div>

      <div class="lollipop-container left">
        <div class="lollipop left">android</div>  
        <div class="palito"></div>
      </div>

      <div class="lollipop-container">
        <div class="lollipop">android</div>  
        <div class="palito"></div>
      </div>

      <div class="montanha"></div>
      <div class="montanha montanha2"></div>

      <div class="chao">

        <div class="android">
          <div class="cabeca">
            <div class="antena1"></div>
            <div class="antena2"></div>  
            
            <div class="olhos-container">
              <div class="olho1"></div>
              <div class="olho2"></div>  
            </div>
          </div>
          
          <div class="corpo-container">
            <div class="braco1"></div>
            <div class="corpo"></div>
            <div class="braco2"></div>
          </div>
          
          <div class="pernas-container">
            <div class="perna1"></div>
            <div class="perna2"></div>
          </div>  
        </div>

      </div>

    </div>

    <div class="modal" id="modal">
      <div class="modal-title">Resultados</div>
      <button type="button" class="btn-modal" id="btn-modal">&#9587;</button>
      
      <script>
        (function() {
          var cx = '012274813638859714121:0rsblg4jxri';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript'; 
          gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
      </script>
      
      <div class="search-results">
        <gcse:searchresults-only></gcse:searchresults-only>  
      </div>

    </div>

    <script type="text/javascript">
      search = document.querySelector("#q");
      olho1 = document.querySelector(".olho1");
      olho2 = document.querySelector(".olho2");
      android = document.querySelector(".android");
      modal = document.querySelector("#modal");
      btnModal = document.querySelector("#btn-modal");
      clicksCount = 0;

      var piscarOlhos = function () {
        olho1.classList.add('piscar');
        olho2.classList.add('piscar');

        setTimeout(paraDePiscar, 500);
      }

      var paraDePiscar = function () {
        olho1.classList.remove('piscar');
        olho2.classList.remove('piscar');     
      }

      var darTchau = function () {
        android.classList.add('tchau');
        setTimeout(paraDeDarTchau, 1000);
      }

      var paraDeDarTchau = function () {
        android.classList.remove('tchau');
      }

      var trocaTema = function () {
        var currentDate = new Date();
        var horaAtual = currentDate.getHours();
        if ( (horaAtual >= 18 && horaAtual <= 23) || (horaAtual >= 1 && horaAtual <= 5) ) {
          document.body.classList.add('night');
        } else { 
          document.body.classList.remove('night');
        }
      }

      var furiousEasterEgg = function () {
        clicksCount += 1;
        if (clicksCount == 10) {
          android.classList.add("furious");
          clearInterval(piscarOlhosId);
          clearInterval(darTchauId);
          setTimeout(furiousEasterEggOff, 7000);
        }
      }

      var furiousEasterEggOff = function () {
        android.classList.remove("furious");
        pisarOlhosId = setInterval(piscarOlhos, 3000);
        darTchauId   = setInterval(darTchau, 10000);
        clicksCount  = 0;
      }

      var showModal = function () {
        var q = window.location.search;
        var busca = q.split('=');
        if (q.length > 0) {
          search.value = busca[1].replace(/[+]/g,' ') || "x";
          setTimeout(function(){
            modal.className += " show";
          },1000);
        }  
      }

      var piscarOlhosId = setInterval(piscarOlhos, 3000);
      var darTchauId    = setInterval(darTchau, 10000);
      var trocaTemaId   = setInterval(trocaTema, 25000);

      trocaTema();
      showModal();

      android.onclick = function () {
        furiousEasterEgg();
      }

      btnModal.onclick = function () {
        modal.className = "modal";
      }
      
    </script>

  </body>
</html>